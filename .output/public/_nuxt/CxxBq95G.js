import{N as p,C,M as b,n as L,o as P,q as Y,w as k,a as n,t as d}from"./CBD-eXxQ.js";import{a as m,c as H}from"./B4DrlZXU.js";import{_ as T}from"./CIqN_2jL.js";function x(t,e){for(let r=0;r<t.length;r++){const o=t[r];let s={label:o.name,key:o.id};if(o.children.length>0){const c=[];x(o.children,c),s.children=c}e.push(s)}}const K=p("category",{state:()=>({categories:[],categoriesTree:[],category:null}),getters:{categoriesOptions:t=>t.categories.map(e=>({label:e.name,value:e.id})),categoriesTreeOptions:t=>{const e=[];return x(t.categoriesTree,e),e}},actions:{loadCategoryById(t){m.get(`/api/category/${t}`).then(e=>{this.category=e.data})},loadCategories(){m.get("/api/category?page_size=2000").then(t=>{this.categories=t.data.results}).catch(t=>console.log(t))},loadCategoriesTree(){m.get("/api/category/tree").then(t=>{this.categoriesTree=t.data}).catch(t=>console.log(t))}}}),tt=p("manufacturer-store",{state:()=>({manufacturers:[],manufacturer:null}),getters:{manufacturersByLetterGrouping:t=>t.manufacturers.reduce((e,r)=>{const o=r.name[0].toUpperCase();return e[o]||(e[o]=[]),e[o].push(r),e},{}),manufacturerOptions:t=>t.manufacturers.map(e=>({label:e.name,value:e.id}))},actions:{loadManufacturers(){m.get("/api/car/manufacturers/").then(t=>{this.manufacturers=t.data.results})},loadManufacturerById(t){m.get(`/api/car/manufacturers/${t}`).then(e=>{this.manufacturer=e.data})}}});function D(t){return typeof t=="function"?t():b(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,O=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function B(t,e,r,o){let s=t<12?"AM":"PM";return o&&(s=s.split("").reduce((c,i)=>c+=`${i}.`,"")),r?s.toLowerCase():s}function u(t){const e=["th","st","nd","rd"],r=t%100;return t+(e[(r-20)%10]||e[r]||e[0])}function E(t,e,r={}){var o;const s=t.getFullYear(),c=t.getMonth(),i=t.getDate(),a=t.getHours(),l=t.getMinutes(),g=t.getSeconds(),v=t.getMilliseconds(),$=t.getDay(),f=(o=r.customMeridiem)!=null?o:B,h={Yo:()=>u(s),YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>c+1,Mo:()=>u(c+1),MM:()=>`${c+1}`.padStart(2,"0"),MMM:()=>t.toLocaleDateString(r.locales,{month:"short"}),MMMM:()=>t.toLocaleDateString(r.locales,{month:"long"}),D:()=>String(i),Do:()=>u(i),DD:()=>`${i}`.padStart(2,"0"),H:()=>String(a),Ho:()=>u(a),HH:()=>`${a}`.padStart(2,"0"),h:()=>`${a%12||12}`.padStart(1,"0"),ho:()=>u(a%12||12),hh:()=>`${a%12||12}`.padStart(2,"0"),m:()=>String(l),mo:()=>u(l),mm:()=>`${l}`.padStart(2,"0"),s:()=>String(g),so:()=>u(g),ss:()=>`${g}`.padStart(2,"0"),SSS:()=>`${v}`.padStart(3,"0"),d:()=>$,dd:()=>t.toLocaleDateString(r.locales,{weekday:"narrow"}),ddd:()=>t.toLocaleDateString(r.locales,{weekday:"short"}),dddd:()=>t.toLocaleDateString(r.locales,{weekday:"long"}),A:()=>f(a,l),AA:()=>f(a,l,!1,!0),a:()=>f(a,l,!0),aa:()=>f(a,l,!0,!0)};return e.replace(O,(y,_)=>{var S,M;return(M=_??((S=h[y])==null?void 0:S.call(h)))!=null?M:y})}function N(t){if(t===null)return new Date(Number.NaN);if(t===void 0)return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){const e=t.match(A);if(e){const r=e[2]-1||0,o=(e[7]||"0").substring(0,3);return new Date(e[1],r,e[3]||1,e[4]||0,e[5]||0,e[6]||0,o)}}return new Date(t)}function G(t,e="HH:mm:ss",r={}){return C(()=>E(N(D(t)),D(e),r))}const R=["src"],j={class:"w-full"},F={class:"flex justify-between flex-col w-full"},z={class:"text-2xl"},q={class:"text-sm mt-2"},I={class:"text-sm text-blue-600 font-light mt-2 hover:underline-offset-1 hover:underline"},U={class:"flex flex-col md:gap-3 md:flex-row"},V={class:"text-sm text-slate-500 font-light"},W={class:"text-sm text-slate-500 font-light"},et=L({__name:"card",props:{item:{}},setup(t){const r=G(t.item.created_at,"MMMM DD",{locales:"ru-RU"});return(o,s)=>{const c=T;return P(),Y(c,{to:{name:"product-id",params:{id:o.item.id}},class:"flex bg-white rounded-lg lg:flex-row border border-white hover:shadow transition cursor-pointer flex-col p-3 lg:p-5 gap-3 hover:border-slate-200"},{default:k(()=>{var i,a;return[n("div",null,[n("img",{class:"rounded border lg:h-[120px] h-[200px] object-cover w-full lg:w-[160px]",src:o.item.pictures.length!=0?o.item.pictures[0].image:"https://demofree.sirv.com/nope-not-here.jpg",alt:""},null,8,R)]),n("div",j,[n("div",F,[n("h2",null,d(o.item.name),1),n("span",z,d(o.item.price)+" ₸",1)]),n("p",q,"б/у "+d(o.item.modification.modelCar.name),1),n("p",I,d(o.item.category),1),n("ul",U,[n("li",V,d(((a=(i=o.item.warehouse)==null?void 0:i.city)==null?void 0:a.name)??"Шымкент"),1),n("li",W,d(b(r)),1)])])]}),_:1},8,["to"])}}});function X(t){let e="?";return Object.keys(t).forEach(function(r,o){const s=t[r];s!=null&&(e+=`${r}=${s}&`)}),e}async function w(t={}){const e=X(t);return await H(`/api/product/${e}`)}const rt=p("product-store",{state:()=>({products:[],isLoadingProducts:!1,popularProducts:[]}),actions:{async loadProducts(t){this.isLoadingProducts=!0,w(t).then(e=>{this.products=e.results}).finally(()=>{this.isLoadingProducts=!1})},loadPopularProducts(t){const e={page_size:4,...t};w(e).then(r=>{this.popularProducts=r.results})}}});export{et as _,tt as a,rt as b,K as u};
