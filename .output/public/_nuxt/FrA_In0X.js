import{u as S}from"./CxyL4IgC.js";import{o as z,r as N,_ as F}from"./CLui3uZd.js";import{o,c as i,a as r,n as j,E as L,G as U,s as A,r as f,F as C,z as V,H as p,t as k,I as K,J as q,K as E,B as O,b,A as n,C as y,d as D,L as R,h as T,M as $,N as G}from"./BdcIS8BQ.js";import{r as H}from"./Cx_jYvdm.js";import{C as J,c as P,a as W,g as Q}from"./Bx4iBQ31.js";import{r as X}from"./BSvKpAgv.js";import{_ as Y}from"./B1KPasxI.js";import"./Bo7bj1_A.js";function Z(x,l){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}const ee={class:"flex flex-wrap w-full items-center gap-1"},te={class:"text-sm text-slate-500"},se=["disabled","placeholder"],le={key:0,class:"h-[250px] top-full left-0 rounded-lg w-full shadow-md bg-white z-10 absolute overflow-scroll flex flex-col"},ae=["onClick"],I=j({__name:"index",props:L({options:{},disabled:{type:Boolean},placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(x){const l=x,s=U(x,"modelValue"),d=a=>{var t;a.target.value===""&&((t=s.value)==null||t.splice(s.length-1,1))};function m(a){var e,h,B;const t=(e=s.value)==null?void 0:e.findIndex(M=>M.id==a.id);t!=-1?(h=s.value)==null||h.splice(t,1):(B=s.value)==null||B.push(a),c.value="",w()}function _(a){var e;return((e=s.value)==null?void 0:e.findIndex(h=>h.id==a.id))!=-1}const v=A(()=>c.value===""?l.options:l.options.filter(a=>a.name.toLowerCase().startsWith(c.value.toLowerCase()))),c=f(""),g=f(null),w=()=>{u.value=!1};z(g,w);const u=f(!1);return(a,t)=>(o(),i("div",{ref_key:"target",ref:g,class:"relative flex justify-between items-center p-2 rounded-lg border"},[r("div",ee,[u.value||s.value.length<=1?(o(!0),i(C,{key:0},V(s.value,e=>(o(),i("div",{class:"p-1 rounded-lg flex gap-1 items-center justify-center",key:e.id},[r("span",te,k(e.name),1),b(n(H),{onClick:h=>m(e),class:"w-5 h-5 cursor-pointer"},null,8,["onClick"])]))),128)):p("",!0),!u.value&&s.value.length>1?(o(),i("div",{key:1,onClick:t[0]||(t[0]=e=>u.value=!0),class:"py-1 px-2 cursor-pointer hover:border-slate-700 border text-sm text-slate-500 rounded-sm flex gap-1 items-center justify-center"},k(s.value[0].name)+" и еще "+k(s.value.length-1),1)):p("",!0),u.value||s.value.length<=1?K((o(),i("input",{key:2,disabled:a.disabled,onKeyup:E(d,["delete"]),"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),onFocus:t[2]||(t[2]=e=>u.value=!0),class:O([{"w-full":s.value.length<=0},"max-w-full text-sm focus:outline-none p-2"]),placeholder:a.placeholder},null,42,se)),[[q,c.value]]):p("",!0)]),r("div",null,[b(n(N),{onClick:t[3]||(t[3]=e=>u.value=!u.value),class:"w-6 h-6 cursor-pointer"})]),u.value?(o(),i("div",le,[(o(!0),i(C,null,V(v.value,e=>(o(),i("div",{onClick:h=>m(e),class:"p-2 border-b border-b-slate-100 flex items-center gap-2 cursor-pointer hover:bg-slate-100",key:e.id},[_(e)?(o(),y(n(Z),{key:0,class:"h-5 w-5 text-sky-700"})):p("",!0),D(),r("div",null,k(e.name),1)],8,ae))),128))])):p("",!0)],512))}}),oe={class:""},re={class:"grid py-[100px] lg:grid-cols-[3fr_2fr] gap-4 items-start justify-center"},ne=r("div",{class:"flex justify-center text-white w-full h-full flex-col"},[r("h1",{class:"text-2xl"},[r("strong",{class:"text-primary"},"Б/у автозапчасти "),D("онлайн от 3 605 европейских продавцов ")]),r("p",{class:"mt-2"},"Выбирайте из 18 575 764 б/у запчастей по доступным ценам в одном магазине")],-1),ie={class:"w-full justify-center flex h-full items-center"},ue={class:"flex w-full gap-2 flex-col bg-white p-4 rounded-lg"},de=r("h2",{class:"text-xl font-bold mb-3"},"Запчасти для вашего автомобиля",-1),ce=r("div",null,"Искать",-1),pe=j({__name:"SearchBlock",setup(x){let l=f(),s=f([]),d=f([]);const m=J.getInstance(),{data:_}=S("manufacturers",()=>w()),v=f([]),c=R();function g(){var a,t;c.push({name:l.value!=null?"catalog-manufacturerId":"catalog",query:{category:(a=d.value)==null?void 0:a.map(e=>e.id).toString(),modification:(t=s.value)==null?void 0:t.map(e=>e.id).toString()},params:{manufacturerId:(l==null?void 0:l.value)!=null?l==null?void 0:l.value.id:null}})}function w(){return P("/api/car/manufacturers/")}T(l,a=>{s.value=[],u(a.id)});function u(a){W.get(`/api/car/models/?manufacturer=${a}`).then(t=>{v.value=t.data.results}).catch(t=>{console.log(t)})}return(a,t)=>(o(),i("div",oe,[r("div",re,[ne,r("div",ie,[r("div",ue,[de,n(_)?(o(),y(F,{key:0,placeholder:"Марка",modelValue:n(l),"onUpdate:modelValue":t[0]||(t[0]=e=>$(l)?l.value=e:l=e),options:n(_).results},null,8,["modelValue","options"])):p("",!0),v.value?(o(),y(I,{key:1,disabled:!n(l),placeholder:"Модель",name:"model",modelValue:n(s),"onUpdate:modelValue":t[1]||(t[1]=e=>$(s)?s.value=e:s=e),options:v.value},null,8,["disabled","modelValue","options"])):p("",!0),n(m).categories.value?(o(),y(I,{key:2,disabled:!n(s),placeholder:"Название детали",name:"Наименования",modelValue:n(d),"onUpdate:modelValue":t[2]||(t[2]=e=>$(d)?d.value=e:d=e),options:n(m).categories.value},null,8,["disabled","modelValue","options"])):p("",!0),r("button",{onClick:g,class:"flex gap-1 cursor-pointer rounded-lg hover:bg-primary-hover mt-3 p-3 bg-primary items-center justify-center"},[b(n(X),{class:"h-5 w-5"}),ce])])])])]))}}),me={style:{backgroundSize:"cover",background:"url('https://kartinki.pics/uploads/posts/2021-07/1626725529_6-kartinkin-com-p-zapchasti-fon-krasivo-7.jpg') no-repeat center"}},fe={class:"mx-auto max-w-7xl px-4 lg:px-6"},ve={class:"mx-auto max-w-7xl px-4 lg:px-6"},ge=r("h3",{class:"mt-9 px-3 md:px-0 text-lg font-bold"},"Лучшие предложение",-1),he={key:0,class:"grid gap-1 md:px-0 md:grid-cols-2 md:gap-3 mt-3"},xe={key:1},je=j({__name:"index",async setup(x){let l,s;const{data:d,error:m}=([l,s]=G(()=>S("products",()=>Q({}))),l=await l,s(),l);return(_,v)=>{var c;return o(),i("main",null,[r("section",me,[r("div",fe,[b(pe)])]),r("section",ve,[ge,(c=n(d))!=null&&c.results?(o(),i("div",he,[(o(!0),i(C,null,V(n(d).results,g=>(o(),y(Y,{item:g},null,8,["item"]))),256))])):(o(),i("div",xe,k(n(m)),1))])])}}});export{je as default};
