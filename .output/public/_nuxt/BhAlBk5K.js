var _=Object.defineProperty;var B=(e,n,i)=>n in e?_(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i;var w=(e,n,i)=>B(e,typeof n!="symbol"?n+"":n,i);import{r as g,a5 as A,h as R,a7 as D,aS as V,aT as z,K}from"./CBD-eXxQ.js";const b=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function q(e,n){if(typeof e!="string")throw new TypeError("argument str must be a string");const i={},r=(n||{}).decode||J;let a=0;for(;a<e.length;){const o=e.indexOf("=",a);if(o===-1)break;let c=e.indexOf(";",a);if(c===-1)c=e.length;else if(c<o){a=e.lastIndexOf(";",o-1)+1;continue}const l=e.slice(a,o).trim();if(i[l]===void 0){let s=e.slice(o+1,c).trim();s.codePointAt(0)===34&&(s=s.slice(1,-1)),i[l]=G(s,r)}a=c+1}return i}function E(e,n,i){const t=i||{},r=t.encode||$;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!b.test(e))throw new TypeError("argument name is invalid");const a=r(n);if(a&&!b.test(a))throw new TypeError("argument val is invalid");let o=e+"="+a;if(t.maxAge!==void 0&&t.maxAge!==null){const c=t.maxAge-0;if(Number.isNaN(c)||!Number.isFinite(c))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(c)}if(t.domain){if(!b.test(t.domain))throw new TypeError("option domain is invalid");o+="; Domain="+t.domain}if(t.path){if(!b.test(t.path))throw new TypeError("option path is invalid");o+="; Path="+t.path}if(t.expires){if(!H(t.expires)||Number.isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(o+="; HttpOnly"),t.secure&&(o+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":{o+="; Priority=Low";break}case"medium":{o+="; Priority=Medium";break}case"high":{o+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:{o+="; SameSite=Strict";break}case"lax":{o+="; SameSite=Lax";break}case"strict":{o+="; SameSite=Strict";break}case"none":{o+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return t.partitioned&&(o+="; Partitioned"),o}function H(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function G(e,n){try{return n(e)}catch{return e}}function J(e){return e.includes("%")?decodeURIComponent(e):e}function $(e){return encodeURIComponent(e)}const O=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function U(e,n){n?n={...O,...n}:n=O;const i=L(n);return i.dispatch(e),i.toString()}const X=Object.freeze(["prototype","__proto__","constructor"]);function L(e){let n="",i=new Map;const t=r=>{n+=r};return{toString(){return n},getContext(){return i},dispatch(r){return e.replacer&&(r=e.replacer(r)),this[r===null?"null":typeof r](r)},object(r){if(r&&typeof r.toJSON=="function")return this.object(r.toJSON());const a=Object.prototype.toString.call(r);let o="";const c=a.length;c<10?o="unknown:["+a+"]":o=a.slice(8,c-1),o=o.toLowerCase();let l=null;if((l=i.get(r))===void 0)i.set(r,i.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(r))return t("buffer:"),t(r.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")this[o]?this[o](r):e.ignoreUnknown||this.unkown(r,o);else{let s=Object.keys(r);e.unorderedObjects&&(s=s.sort());let d=[];e.respectType!==!1&&!T(r)&&(d=X),e.excludeKeys&&(s=s.filter(f=>!e.excludeKeys(f)),d=d.filter(f=>!e.excludeKeys(f))),t("object:"+(s.length+d.length)+":");const h=f=>{this.dispatch(f),t(":"),e.excludeValues||this.dispatch(r[f]),t(",")};for(const f of s)h(f);for(const f of d)h(f)}},array(r,a){if(a=a===void 0?e.unorderedArrays!==!1:a,t("array:"+r.length+":"),!a||r.length<=1){for(const l of r)this.dispatch(l);return}const o=new Map,c=r.map(l=>{const s=L(e);s.dispatch(l);for(const[d,h]of s.getContext())o.set(d,h);return s.toString()});return i=o,c.sort(),this.array(c,!1)},date(r){return t("date:"+r.toJSON())},symbol(r){return t("symbol:"+r.toString())},unkown(r,a){if(t(a),!!r&&(t(":"),r&&typeof r.entries=="function"))return this.array(Array.from(r.entries()),!0)},error(r){return t("error:"+r.toString())},boolean(r){return t("bool:"+r)},string(r){t("string:"+r.length+":"),t(r)},function(r){t("fn:"),T(r)?this.dispatch("[native]"):this.dispatch(r.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(r.name)),e.respectFunctionProperties&&this.object(r)},number(r){return t("number:"+r)},xml(r){return t("xml:"+r.toString())},null(){return t("Null")},undefined(){return t("Undefined")},regexp(r){return t("regex:"+r.toString())},uint8array(r){return t("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},uint8clampedarray(r){return t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},int8array(r){return t("int8array:"),this.dispatch(Array.prototype.slice.call(r))},uint16array(r){return t("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},int16array(r){return t("int16array:"),this.dispatch(Array.prototype.slice.call(r))},uint32array(r){return t("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},int32array(r){return t("int32array:"),this.dispatch(Array.prototype.slice.call(r))},float32array(r){return t("float32array:"),this.dispatch(Array.prototype.slice.call(r))},float64array(r){return t("float64array:"),this.dispatch(Array.prototype.slice.call(r))},arraybuffer(r){return t("arraybuffer:"),this.dispatch(new Uint8Array(r))},url(r){return t("url:"+r.toString())},map(r){t("map:");const a=[...r];return this.array(a,e.unorderedSets!==!1)},set(r){t("set:");const a=[...r];return this.array(a,e.unorderedSets!==!1)},file(r){return t("file:"),this.dispatch([r.name,r.size,r.type,r.lastModfied])},blob(){if(e.ignoreUnknown)return t("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return t("domwindow")},bigint(r){return t("bigint:"+r.toString())},process(){return t("process")},timer(){return t("timer")},pipe(){return t("pipe")},tcp(){return t("tcp")},udp(){return t("udp")},tty(){return t("tty")},statwatcher(){return t("statwatcher")},securecontext(){return t("securecontext")},connection(){return t("connection")},zlib(){return t("zlib")},context(){return t("context")},nodescript(){return t("nodescript")},httpparser(){return t("httpparser")},dataview(){return t("dataview")},signal(){return t("signal")},fsevent(){return t("fsevent")},tlswrap(){return t("tlswrap")}}}const F="[native code] }",Y=F.length;function T(e){return typeof e!="function"?!1:Function.prototype.toString.call(e).slice(-Y)===F}function Q(e,n,i={}){return e===n||U(e,i)===U(n,i)}function p(e){if(typeof e!="object")return e;var n,i,t=Object.prototype.toString.call(e);if(t==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){i=new e.constructor;for(n in e)e.hasOwnProperty(n)&&i[n]!==e[n]&&(i[n]=p(e[n]))}else{i={};for(n in e)n==="__proto__"?Object.defineProperty(i,n,{value:p(e[n]),configurable:!0,enumerable:!0,writable:!0}):i[n]=p(e[n])}return i}if(t==="[object Array]"){for(n=e.length,i=Array(n);n--;)i[n]=p(e[n]);return i}return t==="[object Set]"?(i=new Set,e.forEach(function(r){i.add(p(r))}),i):t==="[object Map]"?(i=new Map,e.forEach(function(r,a){i.set(p(a),p(r))}),i):t==="[object Date]"?new Date(+e):t==="[object RegExp]"?(i=new RegExp(e.source,e.flags),i.lastIndex=e.lastIndex,i):t==="[object DataView]"?new e.constructor(p(e.buffer)):t==="[object ArrayBuffer]"?e.slice(0):t.slice(-6)==="Array]"?new e.constructor(e):e}const Z={path:"/",watch:!0,decode:e=>z(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},S=window.cookieStore;function W(e,n){var l;const i={...Z,...n},t=j(i)||{};let r;i.maxAge!==void 0?r=i.maxAge*1e3:i.expires&&(r=i.expires.getTime()-Date.now());const a=r!==void 0&&r<=0,o=p(a?void 0:t[e]??((l=i.default)==null?void 0:l.call(i))),c=r&&!a?re(o,r,i.watch&&i.watch!=="shallow"):g(o);{let s=null;try{!S&&typeof BroadcastChannel<"u"&&(s=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const d=()=>{i.readonly||Q(c.value,t[e])||(te(e,c.value,i),t[e]=p(c.value),s==null||s.postMessage({value:i.encode(c.value)}))},h=y=>{var m;const v=y.refresh?(m=j(i))==null?void 0:m[e]:i.decode(y.value);f=!0,c.value=v,t[e]=p(v),K(()=>{f=!1})};let f=!1;const C=!!D();if(C&&A(()=>{f=!0,d(),s==null||s.close()}),S){const y=v=>{const m=v.changed.find(M=>M.name===e);m&&h({value:m.value})};S.addEventListener("change",y),C&&A(()=>S.removeEventListener("change",y))}else s&&(s.onmessage=({data:y})=>h(y));i.watch?R(c,()=>{f||d()},{deep:i.watch!=="shallow"}):d()}return c}function j(e={}){return q(document.cookie,e)}function ee(e,n,i={}){return n==null?E(e,n,{...i,maxAge:-1}):E(e,n,i)}function te(e,n,i={}){document.cookie=ee(e,n,i)}const I=2147483647;function re(e,n,i){let t,r,a=0;const o=i?g(e):{value:e};return D()&&A(()=>{r==null||r(),clearTimeout(t)}),V((c,l)=>{i&&(r=R(o,l));function s(){a=0,clearTimeout(t);const d=n-a,h=d<I?d:I;t=setTimeout(()=>{if(a+=h,a<n)return s();o.value=void 0,l()},h)}return{get(){return c(),o.value},set(d){s(),o.value=d,l()}}})}var u=[];for(var k=0;k<256;++k)u.push((k+256).toString(16).slice(1));function ne(e,n=0){return(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase()}var x,ie=new Uint8Array(16);function oe(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(ie)}var ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const N={randomUUID:ae};function P(e,n,i){if(N.randomUUID&&!n&&!e)return N.randomUUID();e=e||{};var t=e.random||(e.rng||oe)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,ne(t)}const de=g(!1),fe=g(!1);class se{constructor(){w(this,"goods",g([]));w(this,"uuid",g(""));w(this,"isActive",g(!1));w(this,"storage",W("card"));const n=P();if(this.uuid.value=n,this.storage.value!=null){const i=this.storage.value;this.goods.value=i.goods,this.uuid.value=i.uuid}}}class ce extends se{constructor(){super()}get totalCost(){let n=0;return this.goods.value.forEach(i=>{n+=i.price*i.quantity}),n}checkInGoods(n){return this.goods.value.filter(i=>i.id==n).length>0}addGood(n){const i=this.goods.value.filter(t=>t.id==n.id);i.length==0?this.goods.value.push(n):i[0].quantity+=1,this.save()}increaseGood(n){const i=this.goods.value.filter(t=>t.id==n);i.length&&(i[0].quantity+=1,this.save())}resetCard(){const n=P();this.uuid.value=n,this.goods.value=[],this.save()}decreaseGood(n){const i=this.goods.value.filter(t=>t.id==n);if(i.length){if(i[0].quantity<=1){this.removeGood(n);return}i[0].quantity-=1,this.save();return}}removeGood(n){const i=this.goods.value.findIndex(t=>t.id==n);i!=-1&&(this.goods.value.splice(i,1),this.save())}save(){this.storage.value=JSON.stringify({uuid:this.uuid.value,goods:this.goods.value})}}const pe=function(){let e;function n(){return new ce}return{getInstance:function(){return e||(e=n()),e}}}();export{pe as C,de as a,fe as i};
