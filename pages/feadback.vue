<template>
<div class="mx-auto container">
  <mobile-only-component>
    <n-page-header :on-back="handleBack" class="fixed w-full z-10 top-0 bg-white px-4 py-2 shadow">
      <template #title>
      <span style="text-decoration: none; color: inherit">
        –ü–æ–∫—É–ø–∫–∞ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
      </span>
      </template>
    </n-page-header>
  </mobile-only-component>
  <desktop-only-component>
    <div class="mt-4 container px-4 mx-auto">
      <n-breadcrumb>
        <n-breadcrumb-item><nuxt-link :to="{
            name: 'index'
          }">–ì–ª–∞–≤–Ω–∞—è
        </nuxt-link></n-breadcrumb-item>
        <n-breadcrumb-item>
          –ü–æ–∫—É–ø–∫–∞ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
        </n-breadcrumb-item>
      </n-breadcrumb>
    </div>
  </desktop-only-component>
    <div class="w-full h-[90vh] px-4 flex justify-center items-center flex-col gap-2 max-w-[400px] mx-auto">
      <h1 class="text-2xl">–ü–æ–º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å –∑–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è!</h1>
        <p>–ù–µ –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –∑–∞–ø—á–∞—Å—Ç—å? –û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏ –Ω–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã —Å–≤—è–∂—É—Ç—Å—è —Å –≤–∞–º–∏, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤ –≤—ã–±–æ—Ä–µ.</p>
        <n-input class="mt-4" v-model:value="feedbackStore.phone" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"></n-input>
        <n-input v-model:value="feedbackStore.nickname" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"></n-input>
        <n-button :loading="feedbackStore.isLoading" @click="onSubmit" class="w-full" type="primary">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</n-button>
    </div>
</div>
</template>
<script setup lang="ts">
import {NInput, NButton, NPageHeader} from 'naive-ui';
import { useFeadBackStore } from '~/stores/feadback-store';
import { useRouter } from "vue-router";

const router = useRouter();

const feedbackStore = useFeadBackStore();
const message = useMessage();

function handleBack() {
  router.back();
}

const onSubmit = async () => {
    if (feedbackStore.phone === '' || feedbackStore.nickname === '') {
        return;
    }

    await feedbackStore.createFeadback();
    message.success('–°–ø–∞—Å–∏–±–æ! üéâ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! –°–µ–π—á–∞—Å –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
    setTimeout(()=>{
        router.push('/')
    }, 3000);
}

</script>